const fs = require('fs');
const path = require('path');
const cheerio = require('cheerio');

const htmlFile = path.join('c:', 'workspace', 'itstory', 'os.html');
let html = fs.readFileSync(htmlFile, 'utf8');

const $ = cheerio.load(html, { decodeEntities: false });

const summaries = {
    '1940s': '복잡한 전선 대신 짧은 마법의 주문을 컴퓨터 머릿속에 쏙 넣어주었어요. 덕분에 컴퓨터가 스스로 생각하고 움직일 수 있게 되었답니다!',
    '1950s': '밤새워 일하던 사람들을 위해 똑똑한 도우미 프로그램이 나타났어요! 알아서 척척 다음 할 일을 찾아주니, 사람들은 푹 쉴 수 있게 되었죠.',
    '1960s': '컴퓨터 모양이 달라도 똑같은 언어로 대화할 수 있는 신기한 마법이 생겼어요. 작은 블록들을 조립해서 멋진 성을 만드는 것처럼 컴퓨터를 다루게 되었답니다.',
    '1970s': '작은 꼬마 컴퓨터들도 어른 컴퓨터처럼 똑똑해졌어요! 기억력이 부족해도 마법의 주머니를 써서 아주 많은 일을 한 번에 해낼 수 있게 되었답니다.',
    '1980s': '까만 화면에 글씨만 쓰던 컴퓨터에 예쁜 그림과 마우스가 생겼어요! 이제 누구나 쉽게 컴퓨터와 친구가 될 수 있는 시대가 열렸답니다.',
    '1990s': '전 세계 친구들이 모여서 함께 컴퓨터의 뇌를 만들기 시작했어요. 그리고 마법의 \'시작\' 버튼 하나로 집에서도 회사에서도 컴퓨터를 아주 쉽게 쓸 수 있게 되었죠!',
    '2000s': '컴퓨터가 아주 예쁜 옷을 입었어요! 게다가 손가락으로 톡톡 만지기만 해도 움직이는 똑똑한 스마트폰이 태어나서 우리 손안으로 들어왔답니다.',
    '2010s': '컴퓨터 프로그램을 예쁜 상자에 담아 어디든 쉽게 배달할 수 있게 되었어요. "이렇게 해줘!"라고 말만 하면 똑똑한 요정들이 알아서 척척 다 해주는 마법 같은 세상이 되었죠.',
    '2020s': '이제 컴퓨터가 어디에 있든 상관없어요! 구름 너머에 있는 컴퓨터도 내 눈앞에 있는 것처럼 똑같이 쓸 수 있는 아주아주 신기한 시대가 되었답니다.'
};

const events = {
    '1948': {
        'summary': '맨체스터의 똑똑한 박사님들은 "짧은 주문 몇 줄이면 충분해!"라는 믿음을 아기 컴퓨터 \'Baby\'를 통해 멋지게 보여주었답니다.',
        'story': '<p>1948년 어느 고요한 새벽, 두 명의 박사님이 커다란 기계 앞에서 스위치를 딸깍딸깍 누르며 속삭였어요. "이제 마법의 주문을 외워볼까?" 짧은 주문이 컴퓨터 머릿속에 들어가자, 아기 컴퓨터 \'Baby\'가 스스로 생각하며 다음 할 일을 찾아내기 시작했어요!</p>\n\t\t\t\t\t<p>Baby가 열심히 수학 문제를 푸는 동안, 사람들은 너무 기뻐서 일기장에 "컴퓨터가 스스로 글을 읽은 첫날!"이라고 적었답니다. 매번 복잡한 전선을 꽂았다 뺐다 하던 힘든 시절이 드디어 끝난 거예요.</p>\n\t\t\t\t\t<p>Baby는 아주 작은 아기였지만, 컴퓨터가 머릿속에 기억을 담아두고 스스로 움직일 수 있다는 걸 세상에 처음으로 보여주었어요. 이제 사람들은 무거운 전선 대신 가벼운 \'소프트웨어\'라는 마법으로 컴퓨터와 대화할 수 있게 되었답니다!</p>',
        'notes': '<p>Baby가 보여준 \'짧은 주문 먼저, 그다음 진짜 일하기\' 방법은 오늘날 모든 컴퓨터가 잠에서 깰 때 하는 아침 체조 같은 습관이 되었어요. 운영체제라는 똑똑한 뇌는 바로 이 습관 위에서 무럭무럭 자라났답니다.</p>'
    },
    '1949': {
        'summary': '케임브리지의 친구들은 31줄의 마법 주문으로 "종이테이프만 쏙 넣으면 다 된답니다!"라는 멋진 약속을 지켰어요.',
        'story': '<p>케임브리지의 실험실에서 한 친구가 컴퓨터를 켜고 스위치를 누르며 "마법 주문, 준비 완료!"라고 씩씩하게 외쳤어요. 그리고 구멍이 뽕뽕 뚫린 종이테이프를 컴퓨터에게 먹여주자, 컴퓨터는 순식간에 그 내용을 머릿속에 쏙쏙 집어넣었답니다.</p>\n\t\t\t\t\t<p>어려운 수학 문제가 가득 적힌 특별한 테이프를 꺼낼 때면 사람들은 활짝 웃었어요. 필요한 테이프를 골라서 쏙 넣기만 하면 컴퓨터가 알아서 척척 정답을 알려주었거든요. 언제나 똑같이 예쁜 모양으로 정답을 보여주니 정말 편리했죠!</p>',
        'notes': '<p>이렇게 마법 주문과 특별한 테이프를 함께 쓰는 방법은 컴퓨터가 일을 배우는 아주 좋은 습관이 되었어요. 이 습관은 나중에 컴퓨터의 똑똑한 뇌인 \'운영체제\'가 만들어지는 튼튼한 기초가 되었답니다.</p>'
    },
    '1956': {
        'summary': '밤새워 일하던 아저씨들은 똑똑한 도우미 덕분에 "밤새 테이프만 갈아 끼우다 끝났네"라는 투정을 멈출 수 있었어요.',
        'story': '<p>디트로이트 연구소에서 밤새 일하던 아저씨는 종이 카드 뭉치를 잔뜩 쌓아두고 "오늘은 똑똑한 도우미가 알아서 잘 해줄까?"라며 기대했어요. 도우미 프로그램이 일을 마칠 때마다 스스로 다음 카드를 척척 불러오자, 아저씨는 드디어 편하게 쉴 수 있었답니다.</p>\n\t\t\t\t\t<p>사람들이 보내온 카드에는 "이건 A 프린터로 뽑아줘!" 같은 심부름이 적혀 있었어요. 똑똑한 도우미는 그 심부름을 순서대로 아주 잘 해냈죠. 아저씨는 가끔 틀린 카드만 골라내면 되었고, 컴퓨터는 쉬지 않고 윙윙 돌아갔어요.</p>',
        'notes': '<p>이 똑똑한 도우미가 보여준 \'알아서 척척 다음 일 하기\' 방법은 나중에 컴퓨터가 여러 가지 일을 한 번에 처리하는 아주 중요한 기술로 발전했답니다.</p>'
    },
    '1959': {
        'summary': 'FMS라는 요정은 "처음부터 끝까지 제가 다 해드릴게요!"라며 유용한 마법 도구들을 예쁜 상자에 담아 주었어요.',
        'story': '<p>컴퓨터를 좋아하는 친구들이 모여서 자신들이 만든 마법 카드들을 책상 위에 올려놓고 "이걸 하나의 마법 상자로 만들어 주세요!"라고 부탁했어요. 그렇게 탄생한 FMS 요정은 카드 맨 앞에 특별한 주문만 붙여주면, 처음부터 끝까지 모든 일을 알아서 척척 해냈답니다.</p>\n\t\t\t\t\t<p>밤에 일하는 아저씨는 "오, 이번엔 과학 문제구나!"라며 주문을 확인하고 시작 버튼만 누르면 끝이었어요. 모두가 함께 쓰는 마법 테이프 덕분에 누가 하든 항상 똑같이 멋진 결과를 얻을 수 있었죠.</p>',
        'notes': '<p>FMS 요정이 보여준 \'어떤 기계든 똑같이 다루기\' 마법은 나중에 컴퓨터가 프린터나 화면과 대화하는 아주 중요한 규칙이 되었답니다.</p>'
    },
    '1964': {
        'summary': 'System/360은 "컴퓨터가 바뀌어도 새로 배울 필요 없어요!"라는 멋진 약속으로 모두를 깜짝 놀라게 했어요.',
        'story': '<p>멋진 양복을 입은 아저씨가 사람들 앞에서 "컴퓨터 모양이 달라도 똑같은 말로 대화할 수 있어요!"라고 자신 있게 말했어요. 똑똑한 발명가들이 컴퓨터의 뇌를 여러 층으로 예쁘게 나누어서, 어떤 컴퓨터든 똑같은 규칙을 따르도록 만들었거든요.</p>\n\t\t\t\t\t<p>회사 사장님들은 "올해는 작은 컴퓨터를 사고, 내년엔 더 큰 컴퓨터로 바꾸자!"라며 신나게 계획을 세웠어요. 컴퓨터를 바꿔도 예전에 쓰던 마법 주문을 그대로 쓸 수 있다는 사실이 너무나 기뻤답니다.</p>',
        'notes': '<p>이때 만들어진 \'모두가 똑같은 규칙으로 대화하기\' 약속은 오늘날 우리가 쓰는 모든 컴퓨터와 구름 너머 클라우드 세상의 튼튼한 뿌리가 되었어요.</p>'
    },
    '1969': {
        'summary': 'UNIX는 "작은 레고 블록들을 조립하면 뭐든 만들 수 있어!"라는 생각으로 아주 재미있는 컴퓨터 세상을 열었어요.',
        'story': '<p>어느 연구소 지하실에서 두 명의 천재 아저씨가 커피를 마시며 "컴퓨터의 모든 것을 똑같은 모양의 상자(파일)처럼 다루자!"라고 재미있는 생각을 했어요. 마법의 파이프를 연결하자, 아주 간단한 주문 몇 개만으로도 엄청나게 복잡한 일을 척척 해낼 수 있었죠.</p>\n\t\t\t\t\t<p>이 재미있는 장난감이 대학교로 퍼지자, 학생들은 "우리 컴퓨터에 맞게 조금 고쳐볼까?"라며 신나게 놀기 시작했어요. 친구들이 서로서로 새로운 아이디어를 나누면서 컴퓨터는 점점 더 똑똑해졌고, 작은 블록들을 조립하는 놀이는 멋진 문화가 되었답니다.</p>',
        'notes': '<p>"모든 것은 똑같은 상자야!"라는 생각과 작은 블록들을 조립하는 놀이는 오늘날 우리가 컴퓨터를 다루는 가장 기본적이고 중요한 방법이 되었어요.</p>'
    },
    '1974': {
        'summary': 'CP/M은 "기본 규칙만 지키면 어떤 프로그램이든 다 돌아가요!"라며 작은 컴퓨터들에게 공통의 언어를 선물했어요.',
        'story': '<p>게리 아저씨는 컴퓨터를 만드는 사람들을 모아놓고 "컴퓨터마다 말이 다르면 힘들잖아요. 우리 가장 밑바닥 규칙만 똑같이 맞춰봐요!"라고 설득했어요. 그래서 컴퓨터의 공통된 부분과 각자 다른 부분을 예쁘게 나누어, 누구나 쉽게 자신의 컴퓨터를 연결할 수 있게 만들었죠.</p>\n\t\t\t\t\t<p>마법의 디스켓을 든 아저씨는 "이것만 쏙 꽂으면 다 됩니다!"라며 여러 회사를 돌아다녔어요. 모양이 다른 컴퓨터에서도 똑같은 화면이 짠! 하고 나타나자, 사람들은 너무 신기해하며 앞다투어 컴퓨터를 샀답니다.</p>',
        'notes': '<p>이렇게 공통된 부분과 다른 부분을 나누는 똑똑한 생각은 오늘날 컴퓨터가 여러 가지 부품들과 사이좋게 대화하는 아주 중요한 방법으로 남아있어요.</p>'
    },
    '1978': {
        'summary': 'VAX/VMS는 "우리도 잠들지 않고 24시간 일할 수 있어!"라며 마법의 기억력과 친구들과 힘을 합치는 방법을 널리 알렸어요.',
        'story': '<p>발명가 아저씨가 컴퓨터를 가리키며 "이 컴퓨터는 자기 머리보다 훨씬 더 큰 생각 주머니를 쓰고 있어요!"라고 자랑했어요. 컴퓨터가 기억하기 힘든 것들을 잠시 다른 창고에 맡겨두는 마법을 부렸거든요.</p>\n\t\t\t\t\t<p>밤이 깊은 병원에서는 "컴퓨터 한 대가 아파서 쉬면, 다른 친구가 바로 도와줄게!"라는 든든한 목소리가 들렸어요. 아주 커다란 컴퓨터가 없어도, 친구들끼리 손을 꽉 잡고 24시간 내내 병원을 지킬 수 있게 되어 모두가 안심했답니다.</p>',
        'notes': '<p>VMS가 보여준 \'안전하게 지키기\'와 \'친구들과 힘 합치기\' 마법은 나중에 더 멋진 컴퓨터 뇌를 만드는 아주 훌륭한 교과서가 되었어요.</p>'
    },
    '1981': {
        'summary': 'MS-DOS는 "주문은 똑같고 장난감 부품만 바뀌는 거야!"라며 수많은 컴퓨터 친구들을 하나로 묶어주었어요.',
        'story': '<p>마이크로소프트의 똑똑한 아저씨들이 "모두가 지켜야 할 약속을 책으로 만들어두면, 다들 따라올 거예요!"라고 멋진 제안을 했어요. 그러자 컴퓨터를 만드는 사람들은 각자 멋진 부품을 달면서도, MS-DOS라는 똑같은 마법 주문을 사용하기 시작했죠.</p>\n\t\t\t\t\t<p>사람들은 \'보여줘(DIR)\'와 \'복사해(COPY)\' 같은 간단한 주문만 배우면 어떤 컴퓨터든 쉽게 다룰 수 있었어요. 집에서도 회사에서도 "DOS 요정만 있으면 다 돼!"라며 모두가 행복해했답니다.</p>',
        'notes': '<p>MS-DOS 요정이 남긴 소중한 약속들은 나중에 예쁜 그림이 있는 Windows 시대로 넘어갈 때 아주 튼튼한 징검다리가 되어주었어요.</p>'
    },
    '1984': {
        'summary': '맥킨토시는 "예쁜 그림을 마우스로 쓱 옮기면 돼!"라며 컴퓨터를 아주 쉽고 재미있는 장난감으로 만들어주었어요.',
        'story': '<p>1984년, 애플의 아저씨가 화면에 있는 귀여운 쓰레기통 그림을 가리키며 "필요 없는 건 마우스로 잡아서 쏙 버리세요!"라고 알려주었어요. 사람들은 쥐 모양의 마우스를 처음 만져봤지만, 금세 예쁜 그림들을 누르며 신나게 놀았답니다.</p>\n\t\t\t\t\t<p>애플이 "모두 이렇게 예쁘게 만들어봐요!"라며 그림책을 나누어준 덕분에, 다른 사람들이 만든 프로그램도 모두 똑같이 예쁘고 쓰기 편했어요. 처음 보는 프로그램을 열어도 길을 잃을 걱정이 전혀 없었죠!</p>',
        'notes': '<p>맥킨토시가 보여준 예쁜 그림과 마우스 놀이는 오늘날 우리가 쓰는 모든 컴퓨터 화면의 아주 중요한 기초가 되었답니다.</p>'
    },
    '1991': {
        'summary': '리눅스는 "나 혼자 재미로 만들고 있는데, 우리 같이 놀래?"라는 편지 한 통으로 전 세계 친구들을 모았어요.',
        'story': '<p>리누스라는 대학생 형이 컴퓨터 게시판에 "나 혼자 재미로 컴퓨터 뇌를 만들고 있는데, 좋은 생각 있는 사람?"이라는 글을 올렸어요. 그러자 며칠 만에 전 세계에서 "내가 도와줄게!", "이런 기능은 어때?"라며 엄청난 편지들이 쏟아졌답니다.</p>\n\t\t\t\t\t<p>누구나 마음대로 설계도를 보고 고칠 수 있었기 때문에, 대학교 친구들, 회사원 아저씨들, 컴퓨터를 좋아하는 모든 사람이 힘을 합쳤어요. 전 세계가 마치 하나의 커다란 팀처럼 움직이며 아주 멋진 컴퓨터 뇌를 함께 만들어갔죠.</p>',
        'notes': '<p>"우리 모두 함께 나누고 같이 만들자!"라는 이 멋진 약속은 오늘날 전 세계 사람들이 힘을 합쳐 좋은 프로그램을 만드는 아름다운 문화가 되었어요.</p>'
    },
    '1995': {
        'summary': 'Windows 95는 "마법의 \'시작\' 버튼만 누르세요!"라며 집과 회사를 똑같이 편리한 세상으로 만들어주었어요.',
        'story': '<p>Windows 95 발표회에서 아저씨가 화면 구석에 있는 초록색 \'시작\' 버튼을 꾹 누르며 "이것만 누르면 마법처럼 다 나와요!"라고 활짝 웃었어요. 새로운 장난감을 컴퓨터에 꽂기만 하면 알아서 척척 준비를 끝내주니, 사람들은 더 이상 컴퓨터를 무서워하지 않게 되었죠.</p>\n\t\t\t\t\t<p>아빠는 회사에서 열심히 일하고, 아이들은 집에서 신나게 게임을 했어요. 똑같은 예쁜 화면 하나로 일도 하고 놀이도 할 수 있는 아주 멋진 세상이 열린 거예요!</p>',
        'notes': '<p>이때 처음 생긴 \'시작\' 버튼과 아래쪽의 긴 줄(작업 표시줄)은 지금도 우리가 컴퓨터를 쓸 때 없어서는 안 될 아주 소중한 친구로 남아있답니다.</p>'
    },
    '2001': {
        'summary': 'Mac OS X는 "아주 튼튼한 뼈대에 세상에서 제일 예쁜 옷을 입혔어요!"라며 모두의 마음을 사로잡았어요.',
        'story': '<p>커다란 무대 위에서 애플 아저씨가 물방울처럼 반짝이는 예쁜 창을 띄웠어요. 그러고는 까만 화면을 열어 어려운 마법 주문도 척척 외워 보였죠. 예쁜 걸 좋아하는 친구들과 어려운 컴퓨터를 좋아하는 친구들 모두가 환호성을 질렀답니다!</p>\n\t\t\t\t\t<p>옛날 장난감도 잘 가지고 놀 수 있게 도와주면서, 새로운 장난감은 더 멋지게 만들 수 있었어요. 컴퓨터가 갑자기 멈추는 일도 없어져서 사람들은 안심했고, 발명가들은 신나게 새로운 마법을 만들어냈어요.</p>',
        'notes': '<p>"예쁜 얼굴 뒤에 숨겨진 아주 튼튼하고 똑똑한 뇌!" 이 멋진 생각은 나중에 아이폰과 애플워치 같은 동생들이 태어나는 아주 훌륭한 밑거름이 되었답니다.</p>'
    },
    '2007': {
        'summary': 'iPhone OS는 "마법 지팡이 없이 손가락만 있으면 돼!"라며 화면을 직접 만지는 신기한 시대를 열었어요.',
        'story': '<p>스티브 잡스 아저씨가 무대 위에서 열 손가락을 쫙 펴 보이며 "우리에게는 이미 열 개의 마법 지팡이가 있어요!"라고 말했어요. 화면에 있는 예쁜 그림들을 손가락으로 톡톡 누르고 쓱쓱 밀기만 하면 마법처럼 움직였죠.</p>\n\t\t\t\t\t<p>화면 속 키보드가 내가 쓸 말을 미리 알아맞히고, 손가락으로 휙 밀면 다음 장으로 넘어갔어요. 사람들은 "우와, 딱딱한 버튼이 없어도 다 되네!"라며 이 신기한 마법 거울에 푹 빠져들었답니다.</p>',
        'notes': '<p>손가락으로 만지는 마법과 나쁜 악당을 막아주는 튼튼한 울타리는, 나중에 수많은 재미있는 앱들이 모여 사는 커다란 놀이터가 만들어지는 기초가 되었어요.</p>'
    },
    '2008': {
        'summary': 'Android는 "누구나 이 마법 상자로 멋진 스마트폰을 만들 수 있어요!"라며 모두에게 활짝 열린 놀이터를 만들어주었어요.',
        'story': '<p>구글의 똑똑한 친구들이 모여서 "이 마법 설명서만 있으면 누구나 자기만의 스마트폰을 만들 수 있어요!"라고 외쳤어요. 스마트폰을 만드는 회사들은 각자 좋아하는 색깔과 모양으로 폰을 꾸미면서도, 안드로이드라는 똑같은 심장을 나누어 가졌죠.</p>\n\t\t\t\t\t<p>발명가들은 자신이 만든 재미있는 장난감 앱을 시장에 올려 사람들에게 자랑했어요. 누구나 자유롭게 새로운 것을 만들어보고 실험할 수 있는 아주 크고 신나는 놀이터가 열린 거예요!</p>',
        'notes': '<p>안드로이드가 만든 \'서로 돕고 나누는 규칙\' 덕분에, 세상에는 아주 다양하고 멋진 스마트폰과 재미있는 앱들이 사이좋게 어울려 살 수 있게 되었답니다.</p>'
    },
    '2013': {
        'summary': 'Docker는 "마법 상자 하나에 다 담아서 어디든 배달해 줄게!"라며 복잡한 이사를 아주 쉽게 만들어주었어요.',
        'story': '<p>한 발명가가 마법 주문을 외우며 "이제 복잡한 이삿짐 싸기 대신, 이 예쁜 상자 하나만 친구에게 보내세요!"라고 말했어요. 프로그램과 필요한 도구들을 상자 하나에 쏙 담아버리자, "어? 내 컴퓨터에선 잘 되는데 네 컴퓨터에선 왜 안 되지?"라며 다투는 일이 싹 사라졌죠.</p>\n\t\t\t\t\t<p>사람들은 잘 만들어진 마법 상자를 그대로 진짜 무대에 올렸고, 구름 너머 클라우드 요정들도 이 상자를 아주 좋아했어요. 이제 컴퓨터는 상자를 안전하게 지켜주기만 하면 되고, 상자 안의 일은 상자가 알아서 하는 멋진 시대가 열렸답니다.</p>',
        'notes': '<p>차곡차곡 쌓는 마법 상자와 상자 보관소는 오늘날 컴퓨터 발명가들이 빠르고 안전하게 멋진 프로그램을 만드는 데 없어서는 안 될 최고의 도구가 되었어요.</p>'
    },
    '2015': {
        'summary': 'Kubernetes는 "원하는 소원만 종이에 적어줘!"라며 수많은 컴퓨터를 한 번에 지휘하는 마법의 지휘자가 되었어요.',
        'story': '<p>똑똑한 요정들이 모여서 "이 마법 종이에 소원만 적어주면, 우리가 알아서 다 맞춰줄게!"라고 자랑했어요. 요정들이 스스로 아픈 컴퓨터를 치료하고 부족한 친구들을 불러오자, 사람들은 더 이상 컴퓨터 한 대 한 대를 밤새워 돌볼 필요가 없어졌죠.</p>\n\t\t\t\t\t<p>수많은 회사들이 이 똑똑한 지휘자 요정을 환영했어요. 이제 컴퓨터의 뇌는 자기 몸 하나만 챙기는 걸 넘어서, 수천 대의 컴퓨터 친구들이 다 함께 멋진 합창을 하도록 지휘하는 엄청난 역할을 맡게 되었답니다.</p>',
        'notes': '<p>"소원만 말하면 요정이 알아서 맞춰준다"는 이 놀라운 마법은 오늘날 구름 너머 클라우드 세상의 모든 곳에 스며들어 세상을 아주 편리하게 만들고 있어요.</p>'
    },
    '2020': {
        'summary': 'macOS Big Sur는 "컴퓨터 심장이 바뀌어도 쓰던 장난감은 그대로 쓸 수 있어!"라며 새로운 마법의 시대를 열었어요.',
        'story': '<p>애플 아저씨가 새로운 심장을 단 컴퓨터를 열며 "마법의 통역사가 옛날 말도 다 알아듣게 해줄 거예요!"라고 말했어요. 사람들은 컴퓨터 심장이 완전히 바뀌었는데도, 예전에 재미있게 가지고 놀던 장난감들을 아무 문제 없이 그대로 쓸 수 있었죠.</p>\n\t\t\t\t\t<p>발명가들은 한 번만 뚝딱뚝딱 만들면 옛날 심장과 새로운 심장 모두에서 돌아가는 신기한 장난감을 만들 수 있었어요. 배터리도 엄청 오래가고 뚜껑을 열자마자 번쩍 깨어나는 컴퓨터를 보며, 사람들은 하드웨어와 소프트웨어가 찰떡궁합일 때 얼마나 멋진 일이 일어나는지 알게 되었답니다.</p>',
        'notes': '<p>낡은 집에서 새집으로 이사할 때 아무도 불편하지 않게 도와준 이 멋진 마법은, 다른 컴퓨터 요정들에게도 아주 훌륭한 본보기가 되었어요.</p>'
    },
    '2021': {
        'summary': 'Windows 11은 "내 방이든 구름 위든 언제나 똑같이 편안하게!"라며 마법 같은 하이브리드 세상을 보여주었어요.',
        'story': '<p>Windows 11 발표회에서 화면 한가운데로 예쁘게 이사 온 \'시작\' 버튼을 보여주며 "손가락으로 톡톡 만지든 마우스로 누르든 다 똑같이 편해요!"라고 자랑했어요. 튼튼한 자물쇠가 기본으로 달려 있어서 나쁜 악당들이 쳐들어올 걱정도 싹 사라졌죠.</p>\n\t\t\t\t\t<p>이제 윈도우 화면 옆에 리눅스 친구도 놀러 오고, 구름 너머에 있는 회사 컴퓨터도 내 방에 있는 것처럼 똑같이 쓸 수 있게 되었어요. 집이든 회사든, 어디서나 똑같은 내 방처럼 편안하게 컴퓨터를 즐기는 마법 같은 세상이 활짝 열렸답니다!</p>',
        'notes': '<p>튼튼한 자물쇠로 안전을 지키고, 내 눈앞의 컴퓨터와 멀리 있는 구름 컴퓨터를 한 번에 지휘하는 이 멋진 능력은 앞으로 컴퓨터가 가져야 할 새로운 기본이 되었어요.</p>'
    }
};

// Replace timeline group summaries
for (const decade in summaries) {
    const decadeP = $('p.timeline-group__decade:contains("' + decade + '")');
    if (decadeP.length > 0) {
        const summaryP = decadeP.nextAll('p.timeline-group__summary').first();
        if (summaryP.length > 0) {
            summaryP.text(summaries[decade]);
        }
    }
}

// Replace event details
for (const year in events) {
    const event = events[year];
    const yearP = $('p.event-detail__year:contains("' + year + '")');
    if (yearP.length > 0) {
        const summaryP = yearP.nextAll('p.event-detail__summary').first();
        if (summaryP.length > 0) {
            summaryP.text(event.summary);
        }
        
        const storyDiv = yearP.parent().next('section.event-detail__body').find('div.event-detail__story');
        if (storyDiv.length > 0) {
            storyDiv.empty();
            const imgTag = '\n\t\t\t\t\t<img src="assets/images/story_os_' + year + '.png" alt="' + year + '년의 이야기 그림" class="story-image" style="width:100%; border-radius:8px; margin-bottom:1rem;">\n\t\t\t\t\t';
            storyDiv.append(imgTag);
            storyDiv.append(event.story);
        }
        
        const notesDiv = yearP.parent().next('section.event-detail__body').find('div.event-detail__notes');
        if (notesDiv.length > 0) {
            notesDiv.empty();
            notesDiv.append(event.notes);
        }
    }
}

// Cheerio might wrap the whole thing in html/head/body if it's a full document, but we loaded it as a full document.
// However, cheerio's html() might change formatting. Let's see.
// Actually, since it's a full document, $.html() is fine.
// But wait, the <template> tags content might not be parsed correctly by cheerio.
// Let's check if cheerio parses <template> content.
// Cheerio parses <template> content as children of the template tag.
// Let's write it back.
fs.writeFileSync(htmlFile, $.html(), 'utf8');
console.log('Done!');
